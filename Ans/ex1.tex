\documentclass[a4j,twcolumn,11pt,nomag]{ltjarticle}      % lualatex の場合
\usepackage{myAns}
\chead{\textgt{システムプログラミング２　課題 No.1 解答}}

\begin{document}
\onecolumn

\section*{課題 No.1 の解答例}
低水準入出力を直接使用するファイルコピープログラムを作成した．

\subsection*{実行例}
実行例の内容は，
リストの右側に書き込んだコメントを参考に確認すること．
\lst{numbers=left,language=,caption=実行例（動作テスト）}{mycp2.txt}

\subsection*{ソースプログラム}
\begin{description}
\item[7行] バッファサイズを\|#define|で定義している．
%課題No.2 の実験ではこの行だけ書き換えてバッファサイズを変更した時の
%性能比較ができる．
\item[9行] メッセージを表示し終了する処理が複数必要なので，
\|err_exit()|関数にまとめた．
\item[20行] コマンド行引数の数を確認している．
確認しないと後の処理で誤動作を引き起こす．
\item[26行] 読み込み用のオープンには\|O_RDONLY|フラグを用いる．
\item[30行] 書き込み用のオープンには\|O_WRONLY|，
\|O_CREATE|，\|O_TRUNC|フラグを用いるのが適切である．
ファイルが短くなる場合に\|O_TRUNC|が必要である．
ファイルを新規作成する場合は保護モードも元ファイルと同じにするべきだが，
これまでの学習内容だけではできないので\|rw-r--r--|に固定とした．
\item[33行] 読み込んだデータのバイト数だけ書き込むように\|len|を用いる．
\end{description}

\lst{numbers=left,language=C,caption=低水準I/O版のmycp(mycp2.c)}{mycp2.c}

\end{document}

